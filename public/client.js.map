{"version":3,"sources":["../client/index.js"],"names":[],"mappings":"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","file":"client.js","sourcesContent":["/**\n * NoSleep.js v0.5.0 - git.io/vfn01\n * Rich Tibbett\n * MIT license\n **/\n(function(root) {\n  // UA matching\n  var ua = {\n    Android: /Android/ig.test(navigator.userAgent),\n    iOS: /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent)\n  };\n\n  var media = {\n    WebM: \"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=\",\n    MP4: \"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==\"\n  };\n\n  function addSourceToVideo(element, type, dataURI) {\n    var source = document.createElement('source');\n    source.src = dataURI;\n    source.type = \"video/\" + type;\n    element.appendChild(source);\n  }\n\n  // NoSleep instance constructor\n  var NoSleep = function() {\n    if (ua.iOS) {\n      this.noSleepTimer = null;\n    } else if (ua.Android) {\n      // Set up no sleep video element\n      this.noSleepVideo = document.createElement('video');\n      this.noSleepVideo.setAttribute(\"loop\", \"\");\n\n      // Append nosleep video sources\n      addSourceToVideo(this.noSleepVideo, \"webm\", media.WebM);\n      addSourceToVideo(this.noSleepVideo, \"mp4\", media.MP4);\n    }\n\n    return this;\n  };\n\n  // Enable NoSleep instance\n  NoSleep.prototype.enable = function(duration) {\n    if (ua.iOS) {\n      this.disable();\n      this.noSleepTimer = window.setInterval(function() {\n        window.location.href = '/';\n        window.setTimeout(window.stop, 0);\n      }, duration || 15000);\n    } else if (ua.Android) {\n      this.noSleepVideo.play();\n    }\n  };\n\n  // Disable NoSleep instance\n  NoSleep.prototype.disable = function() {\n    if (ua.iOS) {\n      if (this.noSleepTimer) {\n        window.clearInterval(this.noSleepTimer);\n        this.noSleepTimer = null;\n      }\n    } else if (ua.Android) {\n      this.noSleepVideo.pause();\n    }\n  };\n\n  // Append NoSleep API to root object\n  window.NoSleep = NoSleep;\n})(this);\n\n\n// ---------------------------------------------------------------------------------------------\n\n\nconst LIMIT = 5;\n\nconst noSleep = new NoSleep();\n\nlet counter = 0;\n\nconst $button = $('#button');\nconst $tag = $('#tag');\n\n$button.off('click').on('click', start);\n\nfunction start() {\n  noSleep.enable();\n  window.addEventListener('devicemotion', listener, true);\n  $button.text('Stop');\n  $button.off('click')\n  $button.on('click', stop);\n}\n\nfunction stop() {\n  window.removeEventListener('devicemotion', listener, true);\n  noSleep.disable;\n  $button.text('Start');\n  $button.off('click')\n  $button.on('click', start);\n}\n\nfunction listener(ev) {\n  if (!ev.acceleration) return;\n  counter++\n  if (counter % 100 == 0) {\n    const event = {\n      x: ev.acceleration.x,\n      y: ev.acceleration.y,\n      z: ev.acceleration.z,\n      tag: $tag.val()\n    }\n    $.post('/event', event);\n    $('#logs').append( `<p> ${event.x} </p>` );\n  }\n}\n\n\n\n\n\n"]}