{"version":3,"sources":["../client/client.js"],"names":[],"mappings":";;AACA,IAAM,QAAQ,CAAR;;AAEN,IAAM,UAAU,IAAI,OAAJ,EAAV;;AAEN,IAAI,UAAU,CAAV;AACJ,IAAI,WAAW,CAAX;AACJ,IAAI,SAAS,EAAT;;AAEJ,IAAM,UAAU,EAAE,SAAF,CAAV;AACN,IAAM,OAAO,EAAE,MAAF,CAAP;AACN,IAAM,YAAY,EAAE,WAAF,CAAZ;;AAEN,QAAQ,GAAR,CAAY,OAAZ,EAAqB,EAArB,CAAwB,OAAxB,EAAiC,KAAjC;;AAEA,SAAS,KAAT,GAAiB;AACf,UAAQ,MAAR,GADe;AAEf,SAAO,gBAAP,CAAwB,cAAxB,EAAwC,QAAxC,EAAkD,IAAlD,EAFe;AAGf,UAAQ,IAAR,CAAa,MAAb,EAHe;AAIf,UAAQ,GAAR,CAAY,OAAZ,EAJe;AAKf,UAAQ,EAAR,CAAW,OAAX,EAAoB,IAApB,EALe;AAMf,aAAW,CAAX,CANe;CAAjB;;AASA,SAAS,IAAT,GAAgB;AACd,SAAO,mBAAP,CAA2B,cAA3B,EAA2C,QAA3C,EAAqD,IAArD,EADc;AAEd,UAAQ,OAAR,CAFc;AAGd,UAAQ,IAAR,CAAa,OAAb,EAHc;AAId,UAAQ,GAAR,CAAY,OAAZ,EAJc;AAKd,UAAQ,EAAR,CAAW,OAAX,EAAoB,KAApB,EALc;CAAhB;;AAQA,SAAS,uBAAT,CAAiC,CAAjC,EAAoC,CAApC,EAAuC,CAAvC,EAA0C;AACxC,SAAO,KAAK,IAAL,CAAU,KAAK,GAAL,CAAS,CAAT,EAAY,CAAZ,IAAiB,KAAK,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAjB,GAAkC,KAAK,GAAL,CAAS,CAAT,EAAY,CAAZ,CAAlC,CAAjB,CADwC;CAA1C;;AAIA,SAAS,WAAT,CAAqB,MAArB,EAA6B;AAC3B,MAAM,MAAM,OAAO,MAAP,CAAc,UAAC,CAAD,EAAI,CAAJ;WAAU,KAAK,CAAL;GAAV,CAApB,CADqB;AAE3B,SAAO,MAAM,OAAO,MAAP,CAFc;CAA7B;;AAKA,SAAS,QAAT,CAAkB,KAAlB,EAAyB;AACvB,MAAI,CAAC,MAAM,YAAN,EAAoB,OAAzB;AACA,MAAM,MAAM,MAAM,YAAN,CAFW;;AAIvB,YAAU,IAAV,CAAe,MAAM,QAAN,CAAf,CAJuB;;AAMvB,MAAM,kBAAkB,wBAAwB,IAAI,CAAJ,EAAO,IAAI,CAAJ,EAAO,IAAI,CAAJ,CAAxD,CANiB;;AAQvB,aAAW,WAAW,eAAX,GAA6B,QAA7B,GAAwC,eAAxC,CARY;AASvB,SAAO,IAAP,CAAY,eAAZ,EATuB;;AAWvB,YAXuB;AAYvB,MAAI,UAAU,GAAV,IAAiB,CAAjB,EAAoB;AACtB,QAAM,WAAW,YAAY,MAAZ,CAAX,CADgB;AAEtB,QAAM,SAAQ;AACZ,gBAAU,QAAV;AACA,gBAAU,QAAV;AACA,WAAK,KAAK,GAAL,EAAL;KAHI,CAFgB;AAOtB,MAAE,IAAF,CAAO,QAAP,EAAiB,MAAjB,EAPsB;AAQtB,MAAE,OAAF,EAAW,MAAX,aAA6B,SAAS,OAAT,CAAiB,CAAjB,eAA4B,SAAS,OAAT,CAAiB,CAAjB,UAAzD,EARsB;AAStB,eAAW,CAAX,CATsB;AAUtB,aAAS,EAAT,CAVsB;GAAxB;CAZF","file":"client.js","sourcesContent":["\nconst LIMIT = 5;\n\nconst noSleep = new NoSleep();\n\nlet counter = 0;\nlet maxValue = 0;\nlet values = [];\n\nconst $button = $('#button');\nconst $tag = $('#tag');\nconst $interval = $('#interval');\n\n$button.off('click').on('click', start);\n\nfunction start() {\n  noSleep.enable(); \n  window.addEventListener('devicemotion', listener, true);\n  $button.text('Stop');\n  $button.off('click')\n  $button.on('click', stop);\n  maxValue = 0;\n}\n\nfunction stop() {\n  window.removeEventListener('devicemotion', listener, true);\n  noSleep.disable;\n  $button.text('Start');\n  $button.off('click')\n  $button.on('click', start);\n}\n\nfunction getAbsoluteAcceleration(x, y, z) {\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(z, 2));\n}\n\nfunction getAvgValue(values) {\n  const sum = values.reduce((s, n) => s += n);\n  return sum / values.length;\n}\n\nfunction listener(event) {\n  if (!event.acceleration) return;\n  const acc = event.acceleration;\n\n  $interval.text(event.interval);\n\n  const absAcceleration = getAbsoluteAcceleration(acc.x, acc.y, acc.z);\n\n  maxValue = maxValue > absAcceleration ? maxValue : absAcceleration;\n  values.push(absAcceleration);\n\n  counter++\n  if (counter % 200 == 0) {\n    const avgValue = getAvgValue(values);\n    const event = {\n      maxValue: maxValue,\n      avgValue: avgValue,\n      tag: $tag.val()\n    }\n    $.post('/event', event);\n    $('#logs').append( `<p>max:${maxValue.toFixed(3)} avg: ${avgValue.toFixed(3)}</p>` );\n    maxValue = 0;\n    values = [];\n  }\n}\n\n\n\n\n\n"]}